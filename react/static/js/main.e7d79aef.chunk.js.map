{"version":3,"sources":["download.png","../node_modules/peerjs/dist sync","Login.js","PostList.js","Share.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","Container","styled","div","Input","input","Submit","Label","label","Login","props","state","value","handleSubmit","bind","handleChange","event","preventDefault","this","history","push","store","setName","setState","target","onSubmit","onChange","type","React","Component","List","ul","ListElement","li","Header","Name","span","StyledDate","StyledFile","Img","img","FileSize","DownloadButton","file","valid","ownerId","src","downloadImg","alt","onClick","getFile","size","ProgressBar","download","fileId","proc","Math","round","progress","fileSize","PostList","rawDate","moment","format","files","map","index","key","owner","getDate","date","name","DropDiv","FileInfo","Share","interval","fetching","peer","shared","downloadQueue","autobind","fetchFilesInfo","setInterval","Peer","peerConfig","on","axios","put","process","console","log","conn","data","v","indexOf","error","send","arrayBuffer","then","buffer","peerId","connect","reliable","oldOnMessage","dataChannel","onmessage","timeStamp","ev","dt","byteLength","q","length","newQueue","slice","downloadFile","close","url","window","URL","createObjectURL","Blob","Uint8Array","tempLink","document","createElement","href","setAttribute","click","fileToDownload","dataTransfer","items","i","kind","getAsFile","shareFiles","forEach","element","newShared","newShare","uuidv1","post","get","res","el","scrollIntoView","behavior","catch","pid","fid","fsize","onDrop","handleDrop","onDragOver","handleDragOver","ref","App","useState","loggedIn","className","path","exact","render","Boolean","location","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"iQAAAA,EAAOC,QAAU,slT,0ECAjB,SAASC,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BF,EAAOC,QAAUC,EACjBA,EAAoBO,GAAK,I,k5BCLzB,IAAMC,EAAYC,IAAOC,IAAV,KAOTC,EAAQF,IAAOG,MAAV,KAULC,EAASJ,IAAOG,MAAV,KAWNE,EAAQL,IAAOM,MAAV,KAmCIC,E,YA9Bb,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,MAAQ,CAAEC,MAAO,IAEtB,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBACpB,EAAKC,aAAe,EAAKA,aAAaD,KAAlB,gBALH,E,0EAQNE,GACXA,EAAMC,iBACNC,KAAKR,MAAMS,QAAQC,KAAK,UACxBF,KAAKR,MAAMW,MAAMC,QAAQJ,KAAKP,MAAMC,S,mCAGzBI,GACXE,KAAKK,SAAS,CAAEX,MAAOI,EAAMQ,OAAOZ,U,+BAGpC,OACE,0BAAMa,SAAUP,KAAKL,cACnB,kBAACZ,EAAD,KACE,kBAACM,EAAD,cACA,kBAACH,EAAD,CAAOQ,MAAOM,KAAKP,MAAMC,MAAOc,SAAUR,KAAKH,eAC/C,kBAACT,EAAD,CAAQqB,KAAK,SAASf,MAAM,iB,GAxBlBgB,IAAMC,W,knCC9B1B,IAAMC,EAAO5B,IAAO6B,GAAV,KAQJC,EAAc9B,IAAO+B,GAAV,KAKXC,EAAShC,IAAOC,IAAV,KAINgC,EAAOjC,IAAOkC,KAAV,KAKJC,GAAanC,IAAOkC,KAAV,KAIVE,GAAapC,IAAOC,IAAV,KAUVoC,GAAMrC,IAAOsC,IAAV,KAMHC,GAAWvC,IAAOC,IAAV,KAId,SAASuC,GAAehC,GACtB,OAAKA,EAAMiC,KAAKC,OAASlC,EAAMiC,KAAKE,UAAYnC,EAAMV,GAIpD,kBAACuC,GAAD,CACEO,IAAKC,IACLC,IAAK,WACLC,QAAS,kBACPvC,EAAMwC,QAAQxC,EAAMiC,KAAKE,QAASnC,EAAMiC,KAAK3C,GAAIU,EAAMiC,KAAKQ,SAPzD,KAaX,SAASC,GAAY1C,GACnB,GAAIA,EAAM2C,UAAY3C,EAAMiC,KAAK3C,KAAOU,EAAM2C,SAASC,OAAQ,CAC7D,IAAMC,EACJC,KAAKC,MACyB,IAA1B/C,EAAM2C,SAASK,SAAoBhD,EAAM2C,SAASM,SAAY,KAC9D,IACN,OACE,6CACejD,EAAM2C,SAASK,SAD9B,OAC4ChD,EAAM2C,SAASM,SAD3D,KAEGJ,EAFH,MAMJ,OAAO,K,IAuCMK,G,gLAnCLC,GACN,OAAOC,IAAOD,GAASE,OAAO,yB,+BAEtB,IAAD,OACP,OACE,kBAACjC,EAAD,KACGZ,KAAKR,MAAMsD,MAAMC,KAAI,SAACtB,EAAMuB,GAC3B,OACE,kBAAClC,EAAD,CAAamC,IAAKD,GAChB,kBAAChC,EAAD,KACE,kBAACC,EAAD,KAAOQ,EAAKyB,OACZ,kBAAC/B,GAAD,KACG,EAAKgC,QAAQ1B,EAAK2B,MADrB,IAC6B3B,EAAKE,UAGpC,kBAACP,GAAD,KACE,6BACGK,EAAK4B,KACN,kBAAC9B,GAAD,KAAWE,EAAKQ,KAAhB,WAEF,kBAACC,GAAD,CAAaT,KAAMA,EAAMU,SAAU,EAAK3C,MAAM2C,WAC9C,kBAACX,GAAD,CACEQ,QAAS,EAAKxC,MAAMwC,QACpBP,KAAMA,EACN3C,GAAI,EAAKU,MAAMV,e,GAzBV4B,IAAMC,W,iLCzE7B,IAAM2C,GAAUtE,IAAOC,IAAV,MAQPsE,GACJ,WAAYL,EAAOG,EAAMvE,EAAImD,GAAkD,IAA5CmB,EAA2C,uDAApC,KAAMzB,EAA8B,uDAApB,KAAMD,EAAc,uDAAN,KAAM,oBAC5E1B,KAAKkD,MAAQA,EACblD,KAAKqD,KAAOA,EACZrD,KAAKlB,GAAKA,EACVkB,KAAKiC,KAAOA,EACZjC,KAAKoD,KAAOA,EACZpD,KAAK2B,QAAUA,EACf3B,KAAK0B,MAAQA,GA6MF8B,G,YAxMb,WAAYhE,GAAQ,IAAD,8BACjB,4CAAMA,KACDiE,SAAW,KAChB,EAAKhE,MAAQ,CACXiE,UAAU,EACVC,KAAM,KACN7E,IAAK,EACLgE,MAAO,GACPc,OAAQ,GACRC,cAAe,IAEjBC,IAAS,gBAXQ,E,iFAaE,IAAD,OAClB,GAA8B,OAA1B9D,KAAKR,MAAMW,MAAMkD,KAArB,CAKArD,KAAK+D,iBACL/D,KAAKyD,SAAWO,YAAYhE,KAAK+D,eAAgB,KAEjD,IAAMJ,EAAO,IAAIM,IAAKC,GACtBP,EAAKQ,GAAG,QAAQ,SAACrF,GACfsF,IAAMC,IAAN,UAAaC,kCAAb,WAAyD,CACvDjB,KAAM,EAAK7D,MAAMW,MAAMkD,KACvBvE,OAEFyF,QAAQC,IAAR,mBAAwB1F,IACxB,EAAKuB,SAAS,CAAEsD,OAAM7E,UAGxB6E,EAAKQ,GAAG,cAAc,SAACM,GAErBA,EAAKN,GAAG,QAAQ,SAACO,GAEf,IAAM1B,EAAQ,EAAKvD,MAAMmE,OAAOb,KAAI,SAAC4B,GAAD,OAAOA,EAAE7F,MAAI8F,QAAQF,GAEzD,IAAe,IAAX1B,EAGF,OAFAuB,QAAQM,MAAM,sCACdJ,EAAKK,KAAK,CAAED,OAAO,IAGrB,IAAIxB,EAAO,EAAK5D,MAAMmE,OAAOZ,GAAOvB,KAAK4B,KACzC,EAAK5D,MAAMmE,OAAOZ,GAAOvB,KAAKsD,cAAcC,MAAK,SAACC,GAChDR,EAAKK,KAAK,CAAEzB,OAAM4B,oBAKxBjF,KAAKK,SAAS,CAAEqD,UAAU,SAnCxB1D,KAAKR,MAAMS,QAAQC,KAAK,O,sCAsCsB,IAAD,OAAlCyD,EAAkC,EAAlCA,KAAMuB,EAA4B,EAA5BA,OAAQ9C,EAAoB,EAApBA,OAAQK,EAAY,EAAZA,SAC7BgC,EAAOd,EAAKwB,QAAQD,EAAQ,CAAEE,UAAU,IAC9CX,EAAKN,GAAG,QAAQ,WACdM,EAAKK,KAAK1C,GAEV,IAAMiD,EAAeZ,EAAKa,YAAYC,UAClCC,EAAY,KAChBf,EAAKa,YAAYC,UAAY,SAACE,GAE5B,GADAJ,EAAaI,GACK,OAAdD,EAAoB,CACtB,IAAME,EAAKD,EAAGD,UAAYA,EAC1BjB,QAAQC,IAAR,iBACYiB,EAAGf,KAAKiB,WADpB,mBACyCD,EADzC,oBACuDD,EAAGf,KACrDiB,WAAaD,EAFlB,UAKFF,EAAYC,EAAGD,UACf,IAAMI,EAAI,EAAKnG,MAAMoE,cACrB,GAAI+B,EAAEC,OAAS,GAAKD,EAAE,GAAGxD,SAAWA,EAAQ,CAC1C,IAAI0D,EAAQ,YAAO,EAAKrG,MAAMoE,eAC9BiC,EAAS,GAAGtD,UAAYiD,EAAGf,KAAKiB,WAChCpB,QAAQC,IAAR,oBAAyBsB,EAAS,GAAGtD,SAArC,eAAoDC,IACpD,EAAKpC,SAAS,CAAEwD,cAAeiC,MAInCrB,EAAKN,GAAG,QAAQ,SAACO,GAEf,IAAIoB,EAAW,EAAKrG,MAAMoE,cAAckC,MAAM,GAQ9C,GAPID,EAASD,OAAS,GACpB,EAAKG,aAAaF,EAAS,IAE7B,EAAKzF,SAAS,CACZwD,cAAeiC,IAEjBvB,QAAQC,IAAI,YACRE,EAAKG,MACPJ,EAAKwB,YADP,CAIA,IAAIC,EAAMC,OAAOC,IAAIC,gBACnB,IAAIC,KAAK,CAAC,IAAIC,WAAW7B,EAAKO,OAAQ,EAAGP,EAAKO,OAAOY,WAEnDW,EAAWC,SAASC,cAAc,KACtCF,EAASG,KAAOT,EAChBM,EAASI,aAAa,WAAYlC,EAAKrB,MACvCmD,EAASK,QACTpC,EAAKwB,iB,8BAKHtC,EAAMuB,EAAQ9C,EAAQK,GAE5B,GADA8B,QAAQC,IAAR,qBAA0B/B,IACb,OAATkB,EAAe,CACjB,IAAMmD,EAAiB,CAAEnD,OAAMuB,SAAQ9C,SAAQK,WAAUD,SAAU,GAC3B,IAApCxC,KAAKP,MAAMoE,cAAcgC,QAC3B7F,KAAKgG,aAAac,GAClB9G,KAAKK,SAAS,CACZwD,cAAe,CAACiD,OAGlBvC,QAAQC,IAAIxE,KAAKP,MAAMoE,eACvB7D,KAAKK,SAAS,CACZwD,cAAc,GAAD,mBAAM7D,KAAKP,MAAMoE,eAAjB,CAAgCiD,U,iCAM1ChH,GACTA,EAAMC,iBACN,IAAI+C,EAAQ,KACZ,GAAIhD,EAAMiH,aAAaC,MAAO,CAC5BlE,EAAQ,GACR,IAAK,IAAImE,EAAI,EAAGA,EAAInH,EAAMiH,aAAaC,MAAMnB,OAAQoB,IACV,SAArCnH,EAAMiH,aAAaC,MAAMC,GAAGC,MAC9BpE,EAAM5C,KAAKJ,EAAMiH,aAAaC,MAAMC,GAAGE,kBAI3CrE,EAAQhD,EAAMiH,aAAajE,MAE7B9C,KAAKoH,WAAWtE,EAAO9C,KAAKR,MAAMW,MAAMkD,MACxCP,EAAMuE,SAAQ,SAACC,GACb/C,QAAQC,IAAI,eAAiB8C,EAAQjE,W,iCAI9BP,EAAOO,GAAO,IAAD,OAClBkE,EAAS,YAAOvH,KAAKP,MAAMmE,QAC/Bd,EAAMuE,SAAQ,SAAC5F,GACb,IAAI+F,EAAW,CAAE/F,OAAM3C,GAAI2I,OAC3BF,EAAUrH,KAAKsH,GACfpD,IACGsD,KADH,UACWpD,kCADX,WACuD,IAAIf,GAASF,EAAM5B,EAAK4B,KAAMmE,EAAS1I,GAAI2C,EAAKQ,OACpG+C,MAAK,WACJ,EAAKjB,uBAGX/D,KAAKK,SAAS,CAAEuD,OAAQ2D,M,uCAGR,IAAD,OACfnD,IACGuD,IADH,UACUrD,kCADV,YAEGU,MAAK,SAAC4C,GACL,EAAKvH,SAAS,CAAEyC,MAAO8E,EAAIlD,KAAMhB,UAAU,IAC3C,EAAKmE,GAAGC,eAAe,CAAEC,SAAU,cAEpCC,OAAM,SAACnD,GACNN,QAAQC,IAAR,qBAA0BK,IAC1B,EAAKxE,SAAS,CAAEqD,UAAU,EAAOmB,e,qCAIxB/E,GACbA,EAAMC,mB,+BAGE,IAAD,OACP,OACE,6BAEE,kBAAC,GAAD,CACEiC,QAAS,SAACiG,EAAKC,EAAKC,GAAX,OACP,EAAKnG,QAAQ,EAAKvC,MAAMkE,KAAMsE,EAAKC,EAAKC,IAE1CxE,KAAM3D,KAAKP,MAAMkE,KACjBb,MAAO9C,KAAKP,MAAMqD,MAClBhE,GAAIkB,KAAKP,MAAMX,GACfqD,SAAUnC,KAAKP,MAAMoE,cAAc,IAAM,OAE3C,kBAACP,GAAD,CACE8E,OAAQpI,KAAKqI,WACbC,WAAYtI,KAAKuI,eACjBC,IAAK,SAACX,GACJ,EAAKA,GAAKA,IAJd,6B,GA3LYnH,IAAMC,W,qOCGX8H,OA1Bf,WAAgB,IAAD,EACaC,mBAAS,CACjCrF,KAAM,KACNsF,UAAU,EACVvI,QAAS,SAACiD,GAAD,OAAUhD,E,2VAAS,CAAD,GAAMZ,EAAN,CAAa4D,aAJ7B,mBACN5D,EADM,KACCY,EADD,KAQb,OACE,yBAAKuI,UAAU,OACb,kBAAC,IAAD,KACE,kBAAC,IAAD,CACEC,KAAK,IACLC,OAAK,EACLC,OAAQ,SAACvJ,GAAD,OAAW,kBAAC,EAAD,iBAAWA,EAAX,CAAkBW,MAAOV,QAE9C,kBAAC,IAAD,CACEoJ,KAAK,SACLC,OAAK,EACLC,OAAQ,SAACvJ,GAAD,OAAW,kBAAC,GAAD,iBAAWA,EAAX,CAAkBW,MAAOV,WCblCuJ,QACW,cAA7B7C,OAAO8C,SAASC,UAEe,UAA7B/C,OAAO8C,SAASC,UAEhB/C,OAAO8C,SAASC,SAASC,MACvB,2DCZNC,IAASL,OAAO,kBAAC,GAAD,MAAStC,SAAS4C,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMxE,MAAK,SAAAyE,GACjCA,EAAaC,kB","file":"static/js/main.e7d79aef.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAQAAADVFOMIAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfiBR4FNTkUgTegAAAbtElEQVR42u3d24+t9V3H8c/M3hTTkBZCUEqapiiI2FpoCSEUaBsEglZoazl4IYnVVGNrhXjTC4MXNZr0wjZRMdakVdMmRij2IAoYChGhh1BqOVMoUKEcNqcNgol7b+r2YkPZp5lZa2Y9z/M7vF7/wMw8a7XrzfD5DgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC9b8gigQMfm8w39NBflHi8plGazRwAFem1OaOqnAYqz7BEAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAABAAHgEACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAHgEQCAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAEAAeAQAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAAAeARAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAADGOzR9C547wHinSsn4bBvZTbPAQBQL9OzV96CAzs8x5BkT4qAPq2ySPo3C35yZzoMUB3PptLPYS+LXkE3ducq3OGxwBduTFnZrvHIADo3SH5Zn7WY4BuPJiT8rTH0DtXACRbc262egzQif/OuT7+EQDs8r1ckJc8BujAj/JructjwAiQVzyYZ/PLHgM072P5Bw8BAcDu3ANA+2z/+TEjQF7lHgDaZvuPAGAF7gGgXbb/7MEIkN25B4BW2f4jAFiVewBoke0/+zACZG/uAaA9tv8IAGbgHgDaYvvPfhgBsj/uAaAdtv8IAObgHgDaYPvPCowA2T/3ANAC238EAHNzDwC1s/1nFUaArMw9ANTN9h8BwDq5B4B62f6zKiNAVuceAOpk+48AYIPcA0B9bP9ZkxEga3EPALWx/UcAsBDuAaAmtv/MxAiQWbgHgHrY/iMAWCD3AFAH239mZATIrNwDQPls/xEADMA9AJTN9p85GAEyO/cAUDLbfwQAg3EPAKWy/WdORoDMxz0AlMn2HwHAwNwDQHls/5mbESDzcw8AZbH9RwAwEvcAUA7bf9bFCJD1cA8ApbD9RwAwKvcAUALbf9bNCJD1cg8A07P9RwAwAfcAMC3bfzbACJCNcA8A07H9RwAwIfcAMA3bfzbICJCNcQ8AU7D9RwAwOfcAMDbbfxbACJCNcw8A47L9RwBQCPcAMB7bfxbCCJDFcA8A47D9RwBQGPcAMDzbfxbGCJBFcQ8AQ7P9RwBQJPcAMCTbfxbKCJBFcg8Aw7H9RwBQMPcAMAzbfxbMCJBFcw8Ai2f7jwCgAu4BYLFs/xmAESCL5x4AFsn2HwFANdwDwKLY/jMQI0CG4R4AFsP2HwFAZdwDwMbZ/jMYI0CG4x4ANsb2HwFApdwDwPrZ/jMoI0CG5B4A1sv2HwFA1dwDwHrY/jM4I0CG5h4A5mf7jwCgAe4BYD62/4zACJAxuAeA2dn+IwBoiHsAmI3tPyMxAmQc7gFgFrb/CACa4x4A1mL7z4iMABmPewBYne0/AoBGuQeAldn+MyojQMblHgD2z/YfAUDj3APAvmz/GZ0RIGNzDwB7s/1HANAF9wCwO9t/JmEEyBTcA8CrbP8RAHTEPQDsYvvPRIwAmYp7ALD9RwDQJfcA9M72nwkZATId9wD0zfYfAUC33APQL9t/JmYEyLTcA9Ar238EAJ1zD0CPbP+ZnBEg03MPQG9s/xEAkMQ9AH2x/acIRoCUwD0A/bD9RwDAbtwD0Afbf4phBEgp3APQA9t/BADswz0ArbP9pyBGgJTEPQAts/1HAMCK3APQKtt/CmMESFncA9Am238EAKzBPQDtsf2nQEaAlMc9AK2x/UcAwEzcA9AS23+KZARImdwD0ArbfwQAzMU9AC2w/adYRoCUyj0A9bP9RwDAOrgHoG62/xTNCJCSuQegZrb/CABYN/cA1Mr2n8IZAVI69wDUyPYfAQAb5h6A2tj+UwEjQMrnHoC62P4jAGBB3ANQD9t/KmEESB3cA1AL238EACyUewBqYPtPNYwAqYd7AEpn+48AgEG4B6Bktv9UxQiQmrgHoFy2/wgAGJB7AMpk+091jACpjXsASmT7jwCAwbkHoDS2/1TICJAauQegJLb/CAAYjXsASmH7T6WMAKmTewDKYPuPAICRuQdgerb/VMwIkHq5B2Bqtv8IAJiEewCmZPtP1YwAqZt7AKZi+48AgEm5B2AKtv9UzwiQ2rkHYHy2/wgAKIB7AMZl+08TjABpgXsAxmT7jwCAYrgHYCy2/zTCCJBWuAdgDLb/CAAojnsAhmb7T0OMAGmHewCGZfuPAIBCuQdgOLb/NMYIkLa4B2Aotv8IACiaewCGYPtPc4wAaY97ABbN9h8BAFVwD8Ai2f7TJCNAWuQegMWx/UcAQEXcA7AYtv80ywiQVrkHYBFs/xEAUB33AGyU7T8NMwKkZe4B2AjbfwQAVMs9AOtl+0/jjABpm3sA1sf2HwEAlXMPwPxs/+mAESDtcw/AvGz/EQDQBPcAzMP2ny4YAdIH9wDMyvYfAQBNcQ/ALGz/6YYRIL1wD8DabP8RANAg9wCszvafrhgB0hP3AKzG9h8BAM1yD8BKbP/pjBEgvXEPwP7Y/iMAoHnuAdib7T8dMgKkP+4B2JPtPwIAOuEegFfZ/tMpI0D65B6AV9j+IwCgK+4BSGz/6ZgRIP1yD4DtPwJgcH+YNzXzzP4jX/DGaYR7gL7Z/rfk13NaMz/Lw/mTcf4ZaBwfyAkNvdEEQCu25tx8I4d4EF2y/W/LafntZn6WW8cJAFcA9M09QK9s/+meAKB31+USD6FDv5+rPQQEAPTtsvyVh9CZz3rNQQBAcnGu8xA6cmM+4iGAAIDkpVyQ+zyGTjyYDzr9AwEAu/jvA/TC9h8EAOzBPUAPbP9BAMA+3AO0z/YfBADsh3uAttn+gwCAFbgHaJftPwgAWJF7gFbZ/oMAgFW5B2iR7T8IAFiTe4DW2P6DAICZuAdoi+0/CACYkXuAdtj+gwCAObgHaIPtPwgAmIt7gBbY/oMAgLm5B6id7T8IAFgX9wA1s/0HAQDr5h6gXrb/IABgA9wD1Mn2HwQAbJB7gPrY/oMAgA1zD1Ab238QALAQ7gFqYvsPAgAWxj1ALWz/QQDAQrkHqIPtPwgAWDD3AOWz/QcBAANwD1A2238QADAI9wAls/0HAQCDcQ9QKtt/EAAwKPcAJbL9BwEAg3MPUB7bfxAAMAL3AGWx/QcBACNxD1AO238QADAa9wClsP0HAQCjcg9QAtt/EAAwOvcAU7P9BwEAk3APMC3bfxAAMBH3ANOx/QcBABNyDzAN238QADAp9wBTsP0HAQCTcw8wNtt/EABQBPcAY7L9BwEAxXAPMB7bfxAAUBD3AOOw/QcBAIVxDzA8238QAFAc9wBDs/0HAQBFcg8wJNt/EABQLPcAQ7H9BwEARXMPMAzbfxAAUDj3AItn+w8CACrgHmCxbP9BAEAV3AMsku0/CACohnuARbH9BwEAVXEPsAi2/yAAoDruATbO9h8EAFTIPcDG2P6DAIBKuQdYP9t/EABQLfcA62X7DwIAquYeYD1s/0EAQPXcA8zL9h8EADTBPcB8bP9BAEAj3APMzvYfBAA0xD3AbGz/QQBAU9wDzML2HwQANMc9wFps/0EAQJPcA6zG9h8EADTLPcDKbP9BAEDD3APsn+0/CABonHuAfdn+gwCA5rkH2JvtPwgA6IJ7gN3Z/oMAgG64B3iF7T8IAOiKe4BdbP9BAEBn3APY/oMAgC71fg9g+w8CALrU9z2A7T8IAOhWv/cAtv8gAKBrfd4D2P6DAIDu9XgPYPsPAgDo7h7A9h8EAJCkr3sA238QAMDL+rkHsP0HAQDspo97ANt/EADAXtq/B7D9BwEA7Efr9wC2/yAAgP1q+R7A9h8EALCiVu8BbP9BAACraPMewPYfBACwhvbuAWz/QQAAM2jrHsD2HwQAMKOW7gFs/0EAADNr5R7A9h8EADCXFu4BbP9BAABzqv8ewPYfBACwDnXfA9j+gwAA1qneewDbfxAAwAbUeg9g+w8CANiQGu8BbP9BAAAbVts9gO0/CABgAeq6B7D9BwEALEg99wC2/yAAgAWq4x7A9h8EALBgNdwD2P6DAAAWrvR7ANt/EADAIEq+B7D9BwEADKTcewDbfxAAwIDKvAew/QcBAAysvHsA238QAMAISrsHsP0HAQCMoqR7ANt/EADAaEq5B7D9BwEAjKiMewDbfxAAwMimvwew/QcBAExg2nsA238QAMBEprwHsP0HAQBMZqp7ANt/EADApKa4B7D9BwEATGz8ewDbfxAAQAHGvQew/QcBABRivHsA238QAEBBxroHsP0HAQAUZYx7ANt/EABAcYa+B7D9BwEAFGjYewDbfxAAQKGGuwew/QcBABRsmHsA238QAEDhhrgHsP0HAQAUb9H3ALb/IACAKizyHsD2HwQAUInF3QPY/oMAACqymHsA238QAEBlNn4PYPsPAgCo0EbvAWz/QQAAVdrIPYDtPwgAoFrrvQew/QcBAFRsffcAtv8gAIDKzX8PYPsPAgBowHz3ALb/IACARsxzD2D7DwIAaMas9wC2/yAAgKbMcg9g+w8CAGjM2vcAtv8gAIAGrX4PYPsPAgBo1Mr3ALb/IACAhq10D2D7DwIAaNr+7gFs/0EAAM3b+x7A9h8EANCBPe8BbP9BAACdePUewPYfBADQkV33ALb/0K3NHgF06rpcnNj+gwAAemP5Dx3zrwAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAABAAAIAAAAAEAAAgAAAAAQAACAAAQAAAAAIAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAAABAAAIAABAAAAAAgAAEAAAgAAAAAQAACAAAEAAAAACAAAQAACAAAAABAAAIAAAAAEAAAgAAEAAAAACAAAQAACAAAAABAAAIAAAgDVtHunr7GzomZ2Wz3jjABT2/8ztGOkTc6wA2NHQS3NsjvW/NQAGsm2cL7Pc1o8DAJXb3lYAbPeKAkB/vwEQAADQ4W8A/CsAAOjwNwBbvaIAMINn2wqAZ7yiAFDOJ6YAAAABMJinvaIAUM4npt8AAEBJGtsAPOoVBYAZPNJWADzkFQWAGfygrQB4Ns97TQGglM/L8f5zwP/lVQWAMv75f8wA8C8BAKCYT8vxAuBeryoAlPJpOV4A3OFVBYBSPi3HC4DbvaoAUMqn5dJoP9IBeTGv8coCwIq25aC81NpvAHbkHq8sAKzirrE+/scMgORWrywArOLb432pMQPgZq8sAJTxSSkAAKDDAFjKmF9rSw7z6gLAfm3J4W3+BmBnvunVBYAV3DTmF1se9Ue73qsLACV8So4bAFd7dQFgBdeO+cWWRv7hHshPe4UBYB/35Zh2fwMwct0AQDVG/i35cts/HgBU4ppxv9zY/wrgJ7Ilr/MqA8Aensvh2dbybwD+N//sVQaAvXx53I//8QMgudyrDABTfzoujf4jHpgteb1XGgB+bGsOz/bWfwOwLV/2SgPAbq4c++N/igBIPueVBoBpPxmXJvlB786xXm0ASJLck58f/4suT/Kj+h0AALzib6b4otP8BuDQPJoDveIAkO15Y57q5TcAz+SLXnEASPKPU3z8T/UbgOS4/OdkXxsAyvH2fHeKL7s80Y97W27wmgPQvX+b5uN/ugBI/syrDkD3Jvs0nO7X8Eu5c4qzBwAoxu05Pjun+dKbJvyxn815XnsAOvbR3N3fbwCS5Xwnx3n1AejUHTk+/zfVF5/yNwA782Qu9PoD0KkP53vTffFpT/GW8q2c6B0AQIduzYlT/fv/ZMorgF2/A7jUOwCALn18yo//qQMguTZXeQ8A0J0v5WvTfgPT/zW+n8ld/rsAAHRle96a+6f9FpYnfwgP5DLvBAC68qmpP/5TxN/jPzj35HDvBgA68Vh+Li9M/U0sF/AgnsvF3g0AdOP3pv/4TzH/Rb4v5f3eEQB04Moy/g5uKQFwRO7Kwd4VADTu+bwlj5bwjWwq5IG8kOfyK94XADTuY/n3Mr6RpWIeyVK+knO8MwBo2NV577R//qfEAEgOy+2uAQBo1pN5W7aU8s0sF/RgnspvlNJFALBgO/Ohcj7+y9kA7PJADs1J3iMANOjTZf3hu6XCHs8BuT6nepcA0Jhv5D3ZLgBWc3huzRHeKQA0ZEvekcfK+paWi3tIT+T8shoJADZkRy4o7eO/tA3ALo/khZzt/QJAIy7JFeV9U5uKfFTfMgYEoBGfyR+V+G0tFfq4NuXKvM+7BoDK/Uvelx8JgHm8Ntf7LQAAVbs1787/lPmtLRX82N6QG3OUdw8Albo/p5X0p3/2tFzwg3s8p+cH3j8AVOmRnFXux3/ZAZA8kjPzuPcQANV5MmeV/Q+xy4U/wO/nrDztfQRAVZ7O6bm37G9xufiHeGfeVd6fTwCAFW3J6bmr9G9yqYpHeWS+liO9owCowMM5I/eX/20uVfI435TrcrR3FQCFeyi/mIdq+EaXK3mgD+fd+Y73FQBFuyUn1/HxX08AJI/nXfmq9xYAxfpK3lPy4d+eNlX0YHfkihzirwMCUKQ/z2/V9F+z3VTVw92Zq7M1Z1b0ewsAerAjl+QT2VnTt7xU4WM+NZfnDd5tABTiqVyYG2r7ppeqfNRH5Iq80zsOgALclAtq/Ku1m6p82C/kC3ldTqo0XwBoxc58Ohfl+Rq/9Zo/Qs/I3+cI7z4AJvJkPpR/rfWbr3lOd12OdxgIwESuzXH1fvyn8j39U3l/fqfOX70AULHn8uGcnSdq/hFa+Lfoh+cvcp53IwAjuSq/mx/W/kO0cFH/RM7P+XV3GACVeCy/mnPq//iv9QpgX3fnr7MjJ2ez9yYAA9mRy/LB3NbGD9PWId1R+dOc7x0KwACuyiV5oJ0fp60/qvv9XJAz823vUgAW6packXNa+vhPo39K54x8Mu/wfgVgAe7MJ/LFuv7Of78BkCznvFyat3rfArABt+ePc2V7H/4tB8Aup+bjea8/GAzAOtycT+aqNj/82w+AJHl7/iDn50DvZABmtC2X51P5bts/ZB//dHxwLshHcpz3NABruDd/l8/lqfZ/0J5+PX5KfjMfyCHe3QDsx7P5p/xtvt7Lj9vbvx/flJNzUS7M673TAXjZ8/lqrsi12d7TD93nQO7AnJ5fytk52rseoGv35ZpcnRuyrb8fve+F/FE5O6fnnfkp/xsA6MqW3Jzrc01bf9pHAMzv6JySU3JC3pLXeBgAzdqWu3NrbsrXc7+HIQB2tznH5BfythyTN+dIc0GABmzNQ3ko9+W23JH78pIHIgDWdnDenDfm0ByaQ3NYDs4BOSjJQTnAowEozo68mOTF7MjWPJ1n8kyeyQ/zUJ73aAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWMP/A04kUQjdTSxZAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE4LTA1LTMwVDA1OjUzOjU3KzAwOjAwpCI7SQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOC0wNS0zMFQwNTo1Mzo1NyswMDowMNV/g/UAAAAASUVORK5CYII=\"","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 60;","import React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Container = styled.div`\r\n  margin: 8px 240px;\r\n  padding: 40px;\r\n  background-color: #f2f2f2;\r\n  border-radius: 5px;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 12px 20px;\r\n  margin: 8px 0;\r\n  display: inline-block;\r\n  border: 1px solid #ccc;\r\n  border-radius: 4px;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst Submit = styled.input`\r\n  width: 100%;\r\n  background-color: #4caf50;\r\n  color: white;\r\n  padding: 14px 20px;\r\n  margin: 8px 0;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst Label = styled.label`\r\n  float: left;\r\n`;\r\n\r\nclass Login extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { value: '' };\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleSubmit(event) {\r\n    event.preventDefault();\r\n    this.props.history.push('/share');\r\n    this.props.store.setName(this.state.value);\r\n  }\r\n\r\n  handleChange(event) {\r\n    this.setState({ value: event.target.value });\r\n  }\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.handleSubmit}>\r\n        <Container>\r\n          <Label>Name:</Label>\r\n          <Input value={this.state.value} onChange={this.handleChange} />\r\n          <Submit type='submit' value='Submit' />\r\n        </Container>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport moment from 'moment';\r\nimport downloadImg from './download.png';\r\n\r\nconst List = styled.ul`\r\n  text-align: left;\r\n  list-style: none;\r\n  background: #45454d;\r\n  padding: 40px;\r\n  margin: 0;\r\n`;\r\n\r\nconst ListElement = styled.li`\r\n  display: block;\r\n  color: white;\r\n`;\r\n\r\nconst Header = styled.div`\r\n  margin-top: 12px;\r\n`;\r\n\r\nconst Name = styled.span`\r\n  font-weight: bold;\r\n  margin-right: 8px;\r\n`;\r\n\r\nconst StyledDate = styled.span`\r\n  color: grey;\r\n`;\r\n\r\nconst StyledFile = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  margin-top: 4px;\r\n  padding: 8px;\r\n  background-color: #5f5f67;\r\n  border-radius: 4px;\r\n`;\r\n\r\nconst Img = styled.img`\r\n  height: 2em;\r\n  float: right;\r\n  cursor: pointer;\r\n`;\r\n\r\nconst FileSize = styled.div`\r\n  color: white;\r\n`;\r\n\r\nfunction DownloadButton(props) {\r\n  if (!props.file.valid || props.file.ownerId === props.id) {\r\n    return null;\r\n  }\r\n  return (\r\n    <Img\r\n      src={downloadImg}\r\n      alt={'Download'}\r\n      onClick={() =>\r\n        props.getFile(props.file.ownerId, props.file.id, props.file.size)\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nfunction ProgressBar(props) {\r\n  if (props.download && props.file.id === props.download.fileId) {\r\n    const proc =\r\n      Math.round(\r\n        ((props.download.progress * 100.0) / props.download.fileSize) * 100\r\n      ) / 100;\r\n    return (\r\n      <span>\r\n        Downloaded: {props.download.progress} of {props.download.fileSize} (\r\n        {proc})%\r\n      </span>\r\n    );\r\n  }\r\n  return null;\r\n}\r\n\r\nclass PostList extends React.Component {\r\n  getDate(rawDate) {\r\n    return moment(rawDate).format('DD/MM/YYYY, H:mm:ss');\r\n  }\r\n  render() {\r\n    return (\r\n      <List>\r\n        {this.props.files.map((file, index) => {\r\n          return (\r\n            <ListElement key={index}>\r\n              <Header>\r\n                <Name>{file.owner}</Name>\r\n                <StyledDate>\r\n                  {this.getDate(file.date)} {file.ownerId}\r\n                </StyledDate>\r\n              </Header>\r\n              <StyledFile>\r\n                <div>\r\n                  {file.name}\r\n                  <FileSize>{file.size} bytes</FileSize>\r\n                </div>\r\n                <ProgressBar file={file} download={this.props.download} />\r\n                <DownloadButton\r\n                  getFile={this.props.getFile}\r\n                  file={file}\r\n                  id={this.props.id}\r\n                />\r\n              </StyledFile>\r\n            </ListElement>\r\n          );\r\n        })}\r\n      </List>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PostList;\r\n","import React from 'react';\r\nimport Peer from 'peerjs';\r\nimport axios from 'axios';\r\nimport peerConfig from './peerConfig.json';\r\nimport styled from 'styled-components';\r\nimport uuidv1 from 'uuid/v1';\r\nimport autobind from 'class-autobind';\r\nimport PostList from './PostList';\r\n\r\nconst DropDiv = styled.div`\r\n  height: 40px;\r\n  background-color: gray;\r\n  color: white;\r\n  font-weight: bold;\r\n  padding-top: 8px;\r\n`;\r\n\r\nclass FileInfo {\r\n  constructor(owner, name, id, size, date = null, ownerId = null, valid = null) {\r\n    this.owner = owner;\r\n    this.name = name;\r\n    this.id = id;\r\n    this.size = size;\r\n    this.date = date;\r\n    this.ownerId = ownerId;\r\n    this.valid = valid;\r\n  }\r\n}\r\n\r\nclass Share extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.interval = null;\r\n    this.state = {\r\n      fetching: false,\r\n      peer: null,\r\n      id: -1,\r\n      files: [],\r\n      shared: [],\r\n      downloadQueue: [],\r\n    };\r\n    autobind(this);\r\n  }\r\n  componentDidMount() {\r\n    if (this.props.store.name === null) {\r\n      this.props.history.push('/');\r\n      return;\r\n    }\r\n\r\n    this.fetchFilesInfo();\r\n    this.interval = setInterval(this.fetchFilesInfo, 2000);\r\n\r\n    const peer = new Peer(peerConfig);\r\n    peer.on('open', (id) => {\r\n      axios.put(`${process.env.REACT_APP_BACKEND_URL}/users/`, {\r\n        name: this.props.store.name,\r\n        id,\r\n      });\r\n      console.log(`User id: ${id}`);\r\n      this.setState({ peer, id });\r\n    });\r\n\r\n    peer.on('connection', (conn) => {\r\n      // send requested file\r\n      conn.on('data', (data) => {\r\n        // check if file with uuid=data is shared if so send it else send empty file\r\n        const index = this.state.shared.map((v) => v.id).indexOf(data);\r\n        // if file is not shared\r\n        if (index === -1) {\r\n          console.error(\"Requested file doesn't exist!\");\r\n          conn.send({ error: true });\r\n          return;\r\n        }\r\n        let name = this.state.shared[index].file.name;\r\n        this.state.shared[index].file.arrayBuffer().then((buffer) => {\r\n          conn.send({ name, buffer });\r\n        });\r\n      });\r\n    });\r\n\r\n    this.setState({ fetching: true });\r\n  }\r\n\r\n  downloadFile({ peer, peerId, fileId, fileSize }) {\r\n    const conn = peer.connect(peerId, { reliable: true });\r\n    conn.on('open', () => {\r\n      conn.send(fileId);\r\n\r\n      const oldOnMessage = conn.dataChannel.onmessage;\r\n      let timeStamp = null;\r\n      conn.dataChannel.onmessage = (ev) => {\r\n        oldOnMessage(ev);\r\n        if (timeStamp !== null) {\r\n          const dt = ev.timeStamp - timeStamp;\r\n          console.log(\r\n            `Bytes: ${ev.data.byteLength}, Time: ${dt}, Speed: ${ev.data\r\n              .byteLength / dt} kB/s`\r\n          );\r\n        }\r\n        timeStamp = ev.timeStamp;\r\n        const q = this.state.downloadQueue;\r\n        if (q.length > 0 && q[0].fileId === fileId) {\r\n          let newQueue = [...this.state.downloadQueue];\r\n          newQueue[0].progress += ev.data.byteLength;\r\n          console.log(`Progress: ${newQueue[0].progress} of ${fileSize}`);\r\n          this.setState({ downloadQueue: newQueue });\r\n        }\r\n      };\r\n\r\n      conn.on('data', (data) => {\r\n        // pop queue and resume download\r\n        let newQueue = this.state.downloadQueue.slice(1);\r\n        if (newQueue.length > 0) {\r\n          this.downloadFile(newQueue[0]);\r\n        }\r\n        this.setState({\r\n          downloadQueue: newQueue,\r\n        });\r\n        console.log('got data');\r\n        if (data.error) {\r\n          conn.close();\r\n          return;\r\n        }\r\n        let url = window.URL.createObjectURL(\r\n          new Blob([new Uint8Array(data.buffer, 0, data.buffer.length)])\r\n        );\r\n        let tempLink = document.createElement('a');\r\n        tempLink.href = url;\r\n        tempLink.setAttribute('download', data.name);\r\n        tempLink.click();\r\n        conn.close();\r\n      });\r\n    });\r\n  }\r\n\r\n  getFile(peer, peerId, fileId, fileSize) {\r\n    console.log(`File size: ${fileSize}`);\r\n    if (peer !== null) {\r\n      const fileToDownload = { peer, peerId, fileId, fileSize, progress: 0 };\r\n      if (this.state.downloadQueue.length === 0) {\r\n        this.downloadFile(fileToDownload);\r\n        this.setState({\r\n          downloadQueue: [fileToDownload],\r\n        });\r\n      } else {\r\n        console.log(this.state.downloadQueue);\r\n        this.setState({\r\n          downloadQueue: [...this.state.downloadQueue, fileToDownload],\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleDrop(event) {\r\n    event.preventDefault();\r\n    let files = null;\r\n    if (event.dataTransfer.items) {\r\n      files = [];\r\n      for (let i = 0; i < event.dataTransfer.items.length; i++) {\r\n        if (event.dataTransfer.items[i].kind === 'file') {\r\n          files.push(event.dataTransfer.items[i].getAsFile());\r\n        }\r\n      }\r\n    } else {\r\n      files = event.dataTransfer.files;\r\n    }\r\n    this.shareFiles(files, this.props.store.name);\r\n    files.forEach((element) => {\r\n      console.log('file.name = ' + element.name);\r\n    });\r\n  }\r\n\r\n  shareFiles(files, name) {\r\n    let newShared = [...this.state.shared];\r\n    files.forEach((file) => {\r\n      let newShare = { file, id: uuidv1() };\r\n      newShared.push(newShare);\r\n      axios\r\n        .post(`${process.env.REACT_APP_BACKEND_URL}/files/`, new FileInfo(name, file.name, newShare.id, file.size))\r\n        .then(() => {\r\n          this.fetchFilesInfo();\r\n        });\r\n    });\r\n    this.setState({ shared: newShared });\r\n  }\r\n\r\n  fetchFilesInfo() {\r\n    axios\r\n      .get(`${process.env.REACT_APP_BACKEND_URL}/files/`)\r\n      .then((res) => {\r\n        this.setState({ files: res.data, fetching: false });\r\n        this.el.scrollIntoView({ behavior: 'smooth' });\r\n      })\r\n      .catch((error) => {\r\n        console.log(`Got error: ${error}`);\r\n        this.setState({ fetching: false, error });\r\n      });\r\n  }\r\n\r\n  handleDragOver(event) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        {/* {this.state.fetching ? <h1>'Fetching'</h1> : null} */}\r\n        <PostList\r\n          getFile={(pid, fid, fsize) =>\r\n            this.getFile(this.state.peer, pid, fid, fsize)\r\n          }\r\n          peer={this.state.peer}\r\n          files={this.state.files}\r\n          id={this.state.id}\r\n          download={this.state.downloadQueue[0] || null}\r\n        />\r\n        <DropDiv\r\n          onDrop={this.handleDrop}\r\n          onDragOver={this.handleDragOver}\r\n          ref={(el) => {\r\n            this.el = el;\r\n          }}\r\n        >\r\n          Drop files to upload\r\n        </DropDiv>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Share;\r\n","import React, { useState } from 'react';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport Login from './Login';\nimport Share from './Share';\nimport './App.css';\n\nfunction App() {\n  const [state, setState] = useState({\n    name: null,\n    loggedIn: false,\n    setName: (name) => setState({ ...state, name }),\n  });\n\n\n  return (\n    <div className='App'>\n      <Router>\n        <Route\n          path='/'\n          exact\n          render={(props) => <Login {...props} store={state} />}\n        />\n        <Route\n          path='/share'\n          exact\n          render={(props) => <Share {...props} store={state} />}\n        />\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}